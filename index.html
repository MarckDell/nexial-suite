<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexial Suite - Sistema Empresarial Boliviano</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="pwa-manifest.json">
    <style>
        /* ============================================= */
        /* REGIÓN: VARIABLES GLOBALES */
        /* ============================================= */
        :root {
            --primary: #7c3aed;
            --primary-glow: #9d5bff;
            --secondary: #00f5ff;
            --accent: #ffd700;
            --success: #00ff41;
            --danger: #ff0055;
            --warning: #ffaa00;
            --info: #00aaff;
            
            --dark: #0f0f23;
            --darker: #070710;
            --card-bg: rgba(15, 15, 35, 0.8);
            --glass: rgba(255, 255, 255, 0.05);
            
            --neon-shadow: 0 0 15px;
        }
        
        /* ============================================= */
        /* MÓDULO: RESET Y BASE */
        /* ============================================= */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', 'Roboto', sans-serif;
            background: var(--darker);
            color: #f0f0ff;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(124, 58, 237, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 245, 255, 0.1) 0%, transparent 20%);
            overflow-x: hidden;
        }
        
        /* ============================================= */
        /* COMPONENTE: HEADER CYBERPUNK */
        /* ============================================= */
        .cyber-header {
            background: rgba(15, 15, 35, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(124, 58, 237, 0.3);
            padding: 1rem 2rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideDown 0.8s ease-out;
        }
        
        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .cyber-logo {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from {
                text-shadow: 0 0 10px rgba(124, 58, 237, 0.5),
                             0 0 20px rgba(124, 58, 237, 0.3);
            }
            to {
                text-shadow: 0 0 20px rgba(124, 58, 237, 0.8),
                             0 0 30px rgba(124, 58, 237, 0.6),
                             0 0 40px rgba(124, 58, 237, 0.4);
            }
        }
        
        .cyber-nav { 
            display: flex; 
            gap: 2rem; 
        }
        
        .cyber-nav a {
            color: #cbd5e1;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .cyber-nav a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(124, 58, 237, 0.2), transparent);
            transition: 0.5s;
        }
        
        .cyber-nav a:hover::before { left: 100%; }
        .cyber-nav a:hover {
            background: rgba(124, 58, 237, 0.2);
            color: var(--secondary);
            transform: translateY(-2px);
        }
        
        /* ============================================= */
        /* COMPONENTE: BOTONES CYBERPUNK */
        /* ============================================= */
        .cyber-btn {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .cyber-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        
        .cyber-btn:hover::before { left: 100%; }
        .cyber-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--neon-shadow) rgba(124, 58, 237, 0.5);
        }
        
        .btn-primary {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            color: white;
        }
        
        /* ============================================= */
        /* SECCIÓN: HERO PRINCIPAL */
        /* ============================================= */
        .cyber-hero {
            padding: 12rem 2rem 6rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .cyber-hero::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(124, 58, 237, 0.1) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 0.3;
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                opacity: 0.6;
                transform: translate(-50%, -50%) scale(1.2);
            }
        }
        
        .cyber-hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(124, 58, 237, 0.3);
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .cyber-subtitle {
            font-size: 1.3rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            opacity: 0.9;
            animation: fadeInUp 1s ease-out 0.5s both;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ============================================= */
        /* MÓDULO: TARJETAS DE CARACTERÍSTICAS */
        /* ============================================= */
        .cyber-features {
            padding: 6rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .cyber-card {
            background: rgba(15, 15, 35, 0.8);
            border-radius: 15px;
            padding: 2rem;
            border: 1px solid rgba(124, 58, 237, 0.3);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease-out forwards;
        }
        
        .cyber-card:nth-child(1) { animation-delay: 0.1s; }
        .cyber-card:nth-child(2) { animation-delay: 0.2s; }
        .cyber-card:nth-child(3) { animation-delay: 0.3s; }
        .cyber-card:nth-child(4) { animation-delay: 0.4s; }
        
        .cyber-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(124, 58, 237, 0.1), transparent);
            transition: 0.5s;
        }
        
        .cyber-card:hover::before { left: 100%; }
        .cyber-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 15px 30px rgba(124, 58, 237, 0.2),
                        0 0 50px rgba(124, 58, 237, 0.1);
        }
        
        .cyber-card h3 {
            color: var(--secondary);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        
        .cyber-card ul {
            margin-top: 1rem;
            padding-left: 1.5rem;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .cyber-card li {
            margin-bottom: 0.5rem;
        }
        
        /* ============================================= */
        /* SECCIÓN: FORMULARIOS */
        /* ============================================= */
        .cyber-form {
            background: rgba(15, 15, 35, 0.8);
            padding: 2.5rem;
            border-radius: 15px;
            border: 1px solid rgba(0, 245, 255, 0.3);
            max-width: 500px;
            margin: 0 auto;
            animation: scaleIn 0.6s ease-out;
        }
        
        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--secondary);
            font-weight: 500;
        }
        
        .form-group input, 
        .form-group select {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(124, 58, 237, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(124, 58, 237, 0.3),
                        0 0 20px rgba(124, 58, 237, 0.1);
        }
        
        .password-wrapper {
            position: relative;
        }
        
        .toggle-password {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--secondary);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .toggle-password:hover {
            color: var(--primary);
            transform: translateY(-50%) scale(1.1);
        }
        
        /* ============================================= */
        /* COMPONENTE: BANNERS DE INFORMACIÓN */
        /* ============================================= */
        .info-banner {
            background: rgba(0, 245, 255, 0.1);
            border: 1px solid var(--secondary);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
            animation: neonGlow 2s ease-in-out infinite alternate;
        }
        
        @keyframes neonGlow {
            from {
                box-shadow: 0 0 10px rgba(0, 245, 255, 0.3),
                            inset 0 0 10px rgba(0, 245, 255, 0.1);
            }
            to {
                box-shadow: 0 0 20px rgba(0, 245, 255, 0.6),
                            inset 0 0 20px rgba(0, 245, 255, 0.2);
            }
        }
        
        .warning-box {
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid var(--accent);
            padding: 1rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            text-align: center;
            animation: pulseWarning 2s ease-in-out infinite;
        }
        
        @keyframes pulseWarning {
            0%, 100% {
                border-color: var(--accent);
                box-shadow: 0 0 10px rgba(255, 215, 0, 0.2);
            }
            50% {
                border-color: #ffed4e;
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
            }
        }
        
        .protection-banner {
            background: rgba(0, 255, 65, 0.1);
            border: 2px solid var(--success);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            text-align: center;
            animation: successPulse 2s ease-in-out infinite;
        }
        
        @keyframes successPulse {
            0%, 100% {
                border-color: var(--success);
                box-shadow: 0 0 15px rgba(0, 255, 65, 0.2);
            }
            50% {
                border-color: #00ffaa;
                box-shadow: 0 0 25px rgba(0, 255, 65, 0.4);
            }
        }
        
        /* ============================================= */
        /* SECCIÓN: FOOTER */
        /* ============================================= */
        .cyber-footer {
            background: rgba(7, 7, 16, 0.95);
            padding: 4rem 2rem 2rem;
            border-top: 1px solid rgba(124, 58, 237, 0.3);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .cyber-footer::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
            animation: scanline 3s linear infinite;
        }
        
        @keyframes scanline {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* ============================================= */
        /* MÓDULO: MODALES CYBERPUNK */
        /* ============================================= */
        .cyber-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(7, 7, 16, 0.98);
            backdrop-filter: blur(10px);
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 2rem;
            overflow-y: auto;
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                backdrop-filter: blur(0);
            }
            to {
                opacity: 1;
                backdrop-filter: blur(10px);
            }
        }
        
        .modal-content {
            background: rgba(15, 15, 35, 0.95);
            padding: 2.5rem;
            border-radius: 20px;
            border: 1px solid rgba(124, 58, 237, 0.4);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5),
                        0 0 100px rgba(124, 58, 237, 0.1);
            animation: modalSlideIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0.7;
            z-index: 10;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .close-modal:hover {
            opacity: 1;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(90deg);
        }
        
        .modal-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(124, 58, 237, 0.3);
            position: relative;
        }
        
        .modal-header::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 25%;
            width: 50%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }
        
        .modal-header h2 {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1.5rem;
        }
        
        /* ============================================= */
        /* COMPONENTE: PARTÍCULAS DE FONDO */
        /* ============================================= */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            background: rgba(124, 58, 237, 0.2);
            border-radius: 50%;
            animation: floatParticle 20s infinite linear;
        }
        
        @keyframes floatParticle {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* ============================================= */
        /* MEDIA QUERIES - RESPONSIVE */
        /* ============================================= */
        @media (max-width: 768px) {
            .cyber-hero h1 { font-size: 2.5rem; }
            .cyber-nav { display: none; }
            .features-grid { grid-template-columns: 1fr; }
            .modal-content { padding: 1.5rem; }
            .form-actions { flex-direction: column; }
        }
        
        @media (max-width: 480px) {
            .cyber-header { padding: 1rem; }
            .cyber-hero { padding: 8rem 1rem 4rem; }
            .cyber-features { padding: 3rem 1rem; }
        }
    </style>
</head>
<body>
    <!-- BLOQUE: PARTÍCULAS DE FONDO -->
    <div class="particles" id="particles"></div>
    
    <!-- BLOQUE: HEADER PRINCIPAL -->
    <header class="cyber-header">
        <div class="cyber-logo">
            <i class="fas fa-brain"></i>
            NEXIAL SUITE
        </div>
        <nav class="cyber-nav">
            <a href="#inicio">Inicio</a>
            <a href="#caracteristicas">Sistema</a>
            <a href="#ventajas">Ventajas</a>
            <a href="#" onclick="openRegisterModal()">Registro</a>
        </nav>
        <button class="cyber-btn" onclick="openLoginModal()">
            <i class="fas fa-sign-in-alt"></i> Acceso
        </button>
    </header>

    <!-- BLOQUE: SECCIÓN HERO -->
    <section class="cyber-hero" id="inicio">
        <h1>Transforma tu Gestión Empresarial en Bolivia</h1>
        <p class="cyber-subtitle">
            Sistema integral por áreas especializadas. Control total, máxima eficiencia.
            Apps para ventas, distribución y almacenes en tiempo real.
        </p>
        <button class="cyber-btn" style="padding: 1.2rem 2.5rem; font-size: 1.1rem;" onclick="openRegisterModal()">
            <i class="fas fa-rocket"></i> COMENZAR PRUEBA GRATUITA
        </button>
    </section>

    <!-- BLOQUE: CARACTERÍSTICAS DEL SISTEMA -->
    <section class="cyber-features" id="caracteristicas">
        <div style="text-align: center; margin-bottom: 3rem;">
            <h2 style="color: var(--secondary); font-size: 2.5rem; animation: fadeInUp 1s ease-out;">SISTEMA POR ÁREAS ESPECIALIZADAS</h2>
            <p style="opacity: 0.8;">Cada área con funciones específicas y control total</p>
        </div>
        
        <div class="features-grid">
            <div class="cyber-card">
                <h3><i class="fas fa-crown"></i> DIRECCIÓN EJECUTIVA</h3>
                <p>Control total de su empresa. Panel ejecutivo completo con visibilidad de todas las áreas.</p>
                <ul>
                    <li>Supervisión todas las áreas</li>
                    <li>Reportes consolidados en tiempo real</li>
                    <li>Gestión estratégica y toma de decisiones</li>
                    <li>Control financiero completo</li>
                    <li>Monitoreo de producción y ventas</li>
                </ul>
            </div>
            
            <div class="cyber-card">
                <h3><i class="fas fa-chart-line"></i> DIRECCIÓN COMERCIAL</h3>
                <p>Ventas, inventario, rutas y gestión comercial especializada con apps móviles.</p>
                <ul>
                    <li>Asignación de zonas geográficas a vendedores</li>
                    <li>Control de inventario en tiempo real</li>
                    <li>Optimización de rutas de distribución</li>
                    <li>Seguimiento de pedidos GPS</li>
                    <li>Mapas y geolocalización avanzada</li>
                    <li>Asignación de productos a vendedores</li>
                    <li>Aprobación de clientes y pedidos</li>
                </ul>
            </div>
            
            <div class="cyber-card">
                <h3><i class="fas fa-calculator"></i> ADMINISTRACIÓN & FINANZAS</h3>
                <p>Contabilidad, nómina, facturación y gestión financiera completa.</p>
                <ul>
                    <li>Gestión de usuarios y empleados</li>
                    <li>Recursos humanos completo</li>
                    <li>Contabilidad automatizada</li>
                    <li>Facturación electrónica</li>
                    <li>Cálculo de comisiones y sueldos</li>
                    <li>Gestión de proveedores</li>
                    <li>Reportes financieros detallados</li>
                </ul>
            </div>
            
            <div class="cyber-card">
                <h3><i class="fas fa-mobile-alt"></i> APPS ESPECIALIZADAS</h3>
                <p>Aplicaciones móviles para cada función operativa.</p>
                <ul>
                    <li>App Vendedor: Pedidos en campo</li>
                    <li>App Almacén: Control de inventario</li>
                    <li>App Distribuidor: Rutas y entregas</li>
                    <li>Trabajo offline con sincronización</li>
                    <li>Notificaciones push en tiempo real</li>
                    <li>Fotos y firmas digitales</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- BLOQUE: SECCIÓN DE VENTAJAS -->
    <section class="cyber-features" id="ventajas" style="background: var(--dark);">
        <div style="text-align: center; margin-bottom: 3rem;">
            <h2 style="color: var(--accent); font-size: 2.5rem;">VENTAJAS DEL SISTEMA</h2>
            <p style="opacity: 0.8;">Todo lo que necesitas en una sola plataforma</p>
        </div>
        
        <div class="features-grid">
            <div class="cyber-card">
                <h3><i class="fas fa-sync-alt"></i> TIEMPO REAL</h3>
                <p>Todas las áreas actualizadas al instante. Lo que ve el vendedor en campo lo ve el jefe en su oficina.</p>
                <ul>
                    <li>Ventas registradas al instante</li>
                    <li>Stock actualizado en tiempo real</li>
                    <li>Ubicación de distribuidores en vivo</li>
                    <li>Notificaciones inmediatas</li>
                </ul>
            </div>
            
            <div class="cyber-card">
                <h3><i class="fas fa-shield-alt"></i> SEGURIDAD TOTAL</h3>
                <p>Datos protegidos con encriptación de extremo a extremo. Cada empresa solo ve su información.</p>
                <ul>
                    <li>Separación de datos por empresa</li>
                    <li>Roles y permisos granulares</li>
                    <li>Backup automático diario</li>
                    <li>Cumplimiento normativo boliviano</li>
                </ul>
            </div>
            
            <div class="cyber-card">
                <h3><i class="fas fa-chart-bar"></i> REPORTES AVANZADOS</h3>
                <p>Análisis detallado de cada aspecto del negocio. Toma decisiones basadas en datos reales.</p>
                <ul>
                    <li>Panel ejecutivo personalizable</li>
                    <li>Reportes financieros automáticos</li>
                    <li>Análisis de ventas por zona</li>
                    <li>Proyecciones y tendencias</li>
                </ul>
            </div>
            
            <div class="cyber-card">
                <h3><i class="fas fa-cogs"></i> INTEGRACIÓN COMPLETA</h3>
                <p>Todas las áreas conectadas entre sí. Finanzas ve lo de ventas, ventas ve lo de almacén.</p>
                <ul>
                    <li>Flujo de trabajo automatizado</li>
                    <li>Aprobaciones electrónicas</li>
                    <li>Comunicación entre áreas</li>
                    <li>Historial completo de operaciones</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- BLOQUE: FOOTER -->
    <footer class="cyber-footer">
        <div class="cyber-logo" style="justify-content: center; margin-bottom: 1rem;">
            <i class="fas fa-brain"></i>
            NEXIAL SUITE
        </div>
        <p style="opacity: 0.8; margin-bottom: 2rem;">Sistema de Gestión Empresarial Integral - Bolivia</p>
        
        <div style="display: flex; justify-content: center; gap: 2rem; margin: 2rem 0; flex-wrap: wrap;">
            <a href="#inicio" style="color: var(--secondary); text-decoration: none;">Inicio</a>
            <a href="#caracteristicas" style="color: var(--secondary); text-decoration: none;">Sistema</a>
            <a href="#ventajas" style="color: var(--secondary); text-decoration: none;">Ventajas</a>
            <a href="#" onclick="openRegisterModal()" style="color: var(--secondary); text-decoration: none;">Registro</a>
            <a href="#" onclick="openLoginModal()" style="color: var(--secondary); text-decoration: none;">Acceso</a>
        </div>
        
        <p>© 2025 Nexial Suite. Todos los derechos reservados.</p>
        <p style="margin-top: 1rem; opacity: 0.7;">
            <i class="fas fa-phone"></i> +591 69800833 | 
            <i class="fas fa-envelope"></i> marcelodanielcc@gmail.com
        </p>
        <p style="margin-top: 0.5rem; opacity: 0.6; font-size: 0.9rem;">
            La Paz - Santa Cruz - Cochabamba | Bolivia
        </p>
    </footer>

    <!-- ============================================= -->
    <!-- MODALES DEL SISTEMA -->
    <!-- ============================================= -->

    <!-- MODAL: LOGIN -->
    <div class="cyber-modal" id="loginModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeLoginModal()">×</button>
            
            <div class="modal-header">
                <h2><i class="fas fa-sign-in-alt"></i> ACCESO AL SISTEMA</h2>
                <p style="color: rgba(255,255,255,0.7);">Ingresa con tus credenciales</p>
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-user"></i> Usuario o Email</label>
                <input type="text" id="loginUser" placeholder="usuario@empresa.com" autofocus>
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-key"></i> Contraseña</label>
                <div class="password-wrapper">
                    <input type="password" id="loginPass" placeholder="Tu contraseña">
                    <button type="button" class="toggle-password" onclick="togglePassword('loginPass')">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
            </div>
            
            <div style="text-align: right; margin: 1rem 0;">
                <a href="#" onclick="recoverPassword()" style="color: var(--primary); text-decoration: none;">
                    <i class="fas fa-unlock-alt"></i> ¿Olvidaste tu contraseña?
                </a>
            </div>
            
            <button class="cyber-btn" style="width: 100%; padding: 1rem; font-size: 1.1rem;" onclick="login()">
                <i class="fas fa-sign-in-alt"></i> INGRESAR AL SISTEMA
            </button>
            
            <div style="text-align: center; margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
                <p style="color: rgba(255,255,255,0.7);">¿No tienes cuenta?</p>
                <button class="cyber-btn btn-secondary" onclick="closeLoginModal(); openRegisterModal();" style="width: 100%; margin-top: 0.5rem;">
                    <i class="fas fa-building"></i> REGISTRAR EMPRESA
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL: REGISTRO DE EMPRESA -->
    <div class="cyber-modal" id="registerModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeRegisterModal()">×</button>
            
            <div class="modal-header">
                <h2><i class="fas fa-building"></i> REGISTRO DE EMPRESA</h2>
                <p style="color: rgba(255,255,255,0.7);">Completa los datos de tu empresa</p>
            </div>
            
            <div class="info-banner">
                <h3><i class="fas fa-gift"></i> 30 DÍAS DE PRUEBA GRATUITA</h3>
                <p>Sin compromiso - Sin cargos ocultos</p>
            </div>
            
            <form id="registerForm" onsubmit="registerCompanyStep1(event)">
                <div class="form-group">
                    <label><i class="fas fa-building"></i> Razón Social *</label>
                    <input type="text" id="companyName" required placeholder="Ej: Mi Empresa S.A.">
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-id-card"></i> NIT (Bolivia) *</label>
                    <input type="text" id="companyNIT" required placeholder="Número de Identificación Tributaria">
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-industry"></i> Tipo de Industria *</label>
                    <select id="companyIndustry" required>
                        <option value="">Seleccionar industria</option>
                        <option value="Tecnología">Tecnología</option>
                        <option value="Comercio">Comercio</option>
                        <option value="Manufactura">Manufactura</option>
                        <option value="Servicios">Servicios</option>
                        <option value="Alimentos">Alimentos</option>
                        <option value="Construcción">Construcción</option>
                        <option value="Mineria">Minería</option>
                        <option value="Agricultura">Agricultura</option>
                        <option value="Turismo">Turismo</option>
                        <option value="Otros">Otros</option>
                    </select>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label>Primer Nombre *</label>
                        <input type="text" id="firstName" required placeholder="Nombre">
                    </div>
                    <div class="form-group">
                        <label>Segundo Nombre</label>
                        <input type="text" id="secondName" placeholder="Segundo nombre">
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label>Primer Apellido *</label>
                        <input type="text" id="firstLastName" required placeholder="Apellido paterno">
                    </div>
                    <div class="form-group">
                        <label>Segundo Apellido</label>
                        <input type="text" id="secondLastName" placeholder="Apellido materno">
                    </div>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-envelope"></i> Email Corporativo *</label>
                    <input type="email" id="companyEmail" required placeholder="contacto@empresa.com.bo">
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-phone"></i> Teléfono/Celular *</label>
                    <input type="tel" id="companyPhone" required placeholder="+591 60000000">
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-key"></i> Contraseña Administrador *</label>
                    <div class="password-wrapper">
                        <input type="password" id="adminPassword" required minlength="8">
                        <button type="button" class="toggle-password" onclick="togglePassword('adminPassword')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <small style="color: rgba(255,255,255,0.6);">Mínimo 8 caracteres</small>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-key"></i> Confirmar Contraseña *</label>
                    <div class="password-wrapper">
                        <input type="password" id="confirmPassword" required minlength="8">
                        <button type="button" class="toggle-password" onclick="togglePassword('confirmPassword')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label style="display: flex; align-items: start; gap: 0.5rem; color: rgba(255,255,255,0.9);">
                        <input type="checkbox" required style="margin-top: 0.3rem;">
                        <span>Acepto los términos y condiciones del servicio y autorizo el tratamiento de mis datos según la normativa boliviana.</span>
                    </label>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="cyber-btn btn-secondary" onclick="closeRegisterModal()">
                        Cancelar
                    </button>
                    <button type="submit" class="cyber-btn">
                        <i class="fas fa-arrow-right"></i> CONTINUAR CON TARJETA
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL: TARJETA DE CRÉDITO -->
    <div class="cyber-modal" id="cardModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeCardModal()">×</button>
            
            <div class="modal-header">
                <h2><i class="fas fa-credit-card"></i> DATOS DE PAGO</h2>
                <p style="color: rgba(255,255,255,0.7);">Información de tarjeta para verificación</p>
            </div>
            
            <div class="protection-banner">
                <h3><i class="fas fa-shield-alt"></i> PROTECCIÓN AL USUARIO</h3>
                <p><strong>PRIMER MES COMPLETAMENTE GRATIS</strong></p>
                <p>Registre su empresa ahora y disfrute de 30 días completos de uso gratuito.</p>
                <p style="font-size: 0.9rem; margin-top: 0.5rem;">Sin cargos ocultos, sin sorpresas.</p>
            </div>
            
            <div class="info-banner" style="background: rgba(255,215,0,0.1); border-color: var(--accent);">
                <h3><i class="fas fa-info-circle"></i> IMPORTANTE</h3>
                <p>Sus datos de tarjeta son requeridos únicamente para verificación.</p>
                <p><strong>NO se realizará ningún cobro durante los primeros 30 días.</strong></p>
                <p style="font-size: 0.9rem; margin-top: 0.5rem;">Pasado el mes de prueba, usted autorizará los pagos desde su panel de control.</p>
            </div>
            
            <form id="cardForm" onsubmit="registerCompanyStep2(event)">
                <div class="form-group">
                    <label><i class="fas fa-credit-card"></i> Número de Tarjeta *</label>
                    <input type="text" id="cardNumber" required placeholder="XXXX XXXX XXXX XXXX" maxlength="19">
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label>Vencimiento *</label>
                        <input type="text" id="cardExpiry" required placeholder="MM/AA" maxlength="5">
                    </div>
                    <div class="form-group">
                        <label>CVV *</label>
                        <input type="text" id="cardCVV" required placeholder="123" maxlength="4">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Nombre en la Tarjeta *</label>
                    <input type="text" id="cardName" required placeholder="Como aparece en la tarjeta">
                </div>
                
                <div class="form-group">
                    <label style="display: flex; align-items: start; gap: 0.5rem; color: rgba(255,255,255,0.9);">
                        <input type="checkbox" required style="margin-top: 0.3rem;">
                        <span>Autorizo que los datos de mi tarjeta sean almacenados de forma segura para futuros pagos, los cuales requerirán mi autorización expresa desde el panel administrativo. Entiendo que NO se me cobrará durante los primeros 30 días.</span>
                    </label>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="cyber-btn btn-secondary" onclick="backToRegister()">
                        <i class="fas fa-arrow-left"></i> VOLVER
                    </button>
                    <button type="submit" class="cyber-btn">
                        <i class="fas fa-check-circle"></i> COMPLETAR REGISTRO
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // =============================================
        // REGIÓN: CONFIGURACIÓN GLOBAL
        // =============================================
        const API_URL = 'https://script.google.com/macros/s/AKfycbw28FmFsyXqe-2i5pxYEXcNTs2SqdUDn4tFNQvLusGNydDUNotf7qE7tI4zR1gI65nT/exec';
        let registeredCompanyData = null;
        
        // =============================================
        // MÓDULO: UTILIDADES VISUALES
        // =============================================
        
        // FUNCIÓN: Crear partículas de fondo
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.style.width = Math.random() * 4 + 1 + 'px';
                particle.style.height = particle.style.width;
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = Math.random() * 20 + 10 + 's';
                particle.style.animationDelay = Math.random() * 5 + 's';
                particlesContainer.appendChild(particle);
            }
        }
        
        // =============================================
        // MÓDULO: MANEJO DE MODALES
        // =============================================
        
        // FUNCIÓN: Abrir modal de login
        function openLoginModal() {
            closeAllModals();
            document.getElementById('loginModal').style.display = 'flex';
            document.getElementById('loginUser').focus();
            document.body.style.overflow = 'hidden';
        }
        
        // FUNCIÓN: Cerrar modal de login
        function closeLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        // FUNCIÓN: Abrir modal de registro
        function openRegisterModal() {
            closeAllModals();
            document.getElementById('registerModal').style.display = 'flex';
            document.getElementById('companyName').focus();
            document.body.style.overflow = 'hidden';
        }
        
        // FUNCIÓN: Cerrar modal de registro
        function closeRegisterModal() {
            document.getElementById('registerModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            resetRegisterForm();
        }
        
        // FUNCIÓN: Abrir modal de tarjeta
        function openCardModal() {
            closeAllModals();
            document.getElementById('cardModal').style.display = 'flex';
            document.getElementById('cardNumber').focus();
            document.body.style.overflow = 'hidden';
        }
        
        // FUNCIÓN: Cerrar modal de tarjeta
        function closeCardModal() {
            document.getElementById('cardModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            resetCardForm();
        }
        
        // FUNCIÓN: Cerrar todos los modales
        function closeAllModals() {
            document.querySelectorAll('.cyber-modal').forEach(modal => {
                modal.style.display = 'none';
            });
            document.body.style.overflow = 'auto';
        }
        
        // FUNCIÓN: Volver al registro desde tarjeta
        function backToRegister() {
            closeCardModal();
            setTimeout(() => openRegisterModal(), 300);
        }
        
        // =============================================
        // MÓDULO: FUNCIONES DEL FORMULARIO
        // =============================================
        
        // FUNCIÓN: Mostrar/ocultar contraseña
        function togglePassword(fieldId) {
            const field = document.getElementById(fieldId);
            const button = field.parentElement.querySelector('.toggle-password');
            const icon = button.querySelector('i');
            
            if (field.type === 'password') {
                field.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                field.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }
        
        // FUNCIÓN: Resetear formulario de registro
        function resetRegisterForm() {
            document.getElementById('registerForm').reset();
            registeredCompanyData = null;
        }
        
        // FUNCIÓN: Resetear formulario de tarjeta
        function resetCardForm() {
            document.getElementById('cardForm').reset();
        }
        
        // =============================================
        // MÓDULO: VALIDACIÓN DE FORMULARIOS
        // =============================================
        
        // FUNCIÓN: Validar NIT boliviano
        function validateBolivianNIT(nit) {
            // Formato básico de NIT boliviano (puedes ajustar según necesidades)
            const nitRegex = /^[0-9]{7,15}$/;
            return nitRegex.test(nit.replace(/\D/g, ''));
        }
        
        // FUNCIÓN: Validar número de tarjeta
        function validateCardNumber(cardNumber) {
            const cleanCard = cardNumber.replace(/\s/g, '');
            // Validar longitud básica
            return cleanCard.length >= 15 && cleanCard.length <= 19;
        }
        
        // FUNCIÓN: Validar fecha de vencimiento
        function validateExpiryDate(expiry) {
            const regex = /^(0[1-9]|1[0-2])\/([0-9]{2})$/;
            if (!regex.test(expiry)) return false;
            
            const [month, year] = expiry.split('/');
            const now = new Date();
            const currentYear = now.getFullYear() % 100;
            const currentMonth = now.getMonth() + 1;
            
            const expiryYear = parseInt(year);
            const expiryMonth = parseInt(month);
            
            if (expiryYear < currentYear) return false;
            if (expiryYear === currentYear && expiryMonth < currentMonth) return false;
            
            return true;
        }
        
        // =============================================
        // MÓDULO: REGISTRO PASO 1 - DATOS EMPRESA
        // =============================================
        
        // FUNCIÓN: Procesar registro paso 1
        function registerCompanyStep1(event) {
            event.preventDefault();
            
            // Validar contraseñas
            const password = document.getElementById('adminPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (password !== confirmPassword) {
                alert('Las contraseñas no coinciden');
                return;
            }
            
            if (password.length < 8) {
                alert('La contraseña debe tener mínimo 8 caracteres');
                return;
            }
            
            // Recopilar datos
            registeredCompanyData = {
                nombre: document.getElementById('companyName').value.trim(),
                nit: document.getElementById('companyNIT').value.trim(),
                industria: document.getElementById('companyIndustry').value,
                primer_nombre: document.getElementById('firstName').value.trim(),
                segundo_nombre: document.getElementById('secondName').value.trim() || '',
                primer_apellido: document.getElementById('firstLastName').value.trim(),
                segundo_apellido: document.getElementById('secondLastName').value.trim() || '',
                email: document.getElementById('companyEmail').value.trim().toLowerCase(),
                telefono: document.getElementById('companyPhone').value.trim(),
                password: password,
                pais: 'Bolivia',
                fecha_registro: new Date().toISOString().split('T')[0]
            };
            
            // Validar campos requeridos
            const requiredFields = ['nombre', 'nit', 'industria', 'primer_nombre', 
                                  'primer_apellido', 'email', 'telefono'];
            
            for (const field of requiredFields) {
                if (!registeredCompanyData[field]) {
                    alert(`Por favor complete el campo: ${field.replace('_', ' ')}`);
                    return;
                }
            }
            
            // Validar NIT boliviano
            if (!validateBolivianNIT(registeredCompanyData.nit)) {
                alert('Por favor ingrese un NIT válido (solo números, 7-15 dígitos)');
                return;
            }
            
            // Validar email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(registeredCompanyData.email)) {
                alert('Por favor ingrese un email válido');
                return;
            }
            
            // Validar teléfono boliviano
            const phoneRegex = /^(\+591|591)?\s?[67]\d{7}$/;
            const cleanPhone = registeredCompanyData.telefono.replace(/\D/g, '');
            if (!phoneRegex.test(cleanPhone)) {
                alert('Por favor ingrese un número de teléfono/celular boliviano válido');
                return;
            }
            
            // Ir a modal de tarjeta
            closeRegisterModal();
            setTimeout(openCardModal, 300);
        }
        
        // =============================================
        // MÓDULO: REGISTRO PASO 2 - DATOS TARJETA
        // =============================================
        
        // FUNCIÓN: Procesar registro paso 2
        async function registerCompanyStep2(event) {
            event.preventDefault();
            
            if (!registeredCompanyData) {
                alert('Error: Datos de empresa no encontrados. Por favor comience de nuevo.');
                closeCardModal();
                openRegisterModal();
                return;
            }
            
            // Recopilar datos de tarjeta
            const cardData = {
                tarjeta_numero: document.getElementById('cardNumber').value.replace(/\s/g, ''),
                tarjeta_vencimiento: document.getElementById('cardExpiry').value,
                tarjeta_cvv: document.getElementById('cardCVV').value,
                tarjeta_nombre: document.getElementById('cardName').value.trim()
            };
            
            // Validar datos de tarjeta
            if (!validateCardNumber(cardData.tarjeta_numero)) {
                alert('Número de tarjeta inválido');
                return;
            }
            
            if (!validateExpiryDate(cardData.tarjeta_vencimiento)) {
                alert('Fecha de vencimiento inválida o expirada. Use formato MM/AA');
                return;
            }
            
            if (cardData.tarjeta_cvv.length < 3 || cardData.tarjeta_cvv.length > 4) {
                alert('CVV inválido (3 o 4 dígitos)');
                return;
            }
            
            if (!cardData.tarjeta_nombre) {
                alert('Por favor ingrese el nombre como aparece en la tarjeta');
                return;
            }
            
            // Mostrar loading
            const submitBtn = event.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> PROCESANDO...';
            submitBtn.disabled = true;
            
            try {
                // Combinar datos
                const fullData = {
                    ...registeredCompanyData,
                    ...cardData,
                    action: 'registerCompany'
                };
                
                console.log('Enviando datos a API:', fullData);
                
                // Llamar a la API
                const formData = new FormData();
                Object.keys(fullData).forEach(key => {
                    formData.append(key, fullData[key]);
                });
                
                const response = await fetch(API_URL, {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                console.log('Respuesta de API:', result);
                
                if (result && result.success) {
                    // Éxito - mostrar modal de confirmación
                    showSuccessModal(result);
                } else {
                    alert('Error en el registro: ' + (result?.error || 'Error desconocido'));
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }
                
            } catch (error) {
                console.error('Error en registro:', error);
                alert('Error de conexión con el servidor. Por favor intente nuevamente.');
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        }
        
        // =============================================
        // MÓDULO: LOGIN DEL SISTEMA
        // =============================================
        
        // FUNCIÓN: Procesar login
        async function login() {
            const user = document.getElementById('loginUser').value.trim();
            const password = document.getElementById('loginPass').value;
            
            if (!user || !password) {
                alert('Por favor complete todos los campos');
                return;
            }
            
            // Mostrar loading
            const loginBtn = document.querySelector('#loginModal .cyber-btn');
            const originalText = loginBtn.innerHTML;
            loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> VERIFICANDO...';
            loginBtn.disabled = true;
            
            try {
                // Verificar si es el super admin
                if (user === 'marcelodanielcc@gmail.com' && password === '789') {
                    // Login exitoso como super admin
                    localStorage.setItem('nexial_user', JSON.stringify({
                        id: 'SUPER-ADMIN-001',
                        email: 'marcelodanielcc@gmail.com',
                        nombre: 'Marcelo Daniel Condori',
                        role: 'super',
                        empresa: 'Nexial Suite',
                        empresa_id: 'global',
                        activo: 'Sí'
                    }));
                    
                    closeLoginModal();
                    window.location.href = 'dashboard.html';
                    return;
                }
                
                // Login normal via API
                const formData = new FormData();
                formData.append('action', 'login');
                formData.append('email', user);
                formData.append('password', password);
                
                const response = await fetch(API_URL, {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                if (result && result.success) {
                    // Guardar datos de usuario
                    localStorage.setItem('nexial_user', JSON.stringify(result.user));
                    
                    // Redirigir al dashboard
                    closeLoginModal();
                    window.location.href = 'dashboard.html';
                } else {
                    alert(result?.error || 'Usuario o contraseña incorrectos');
                    loginBtn.innerHTML = originalText;
                    loginBtn.disabled = false;
                }
                
            } catch (error) {
                console.error('Error en login:', error);
                alert('Error de conexión. Por favor intente nuevamente.');
                loginBtn.innerHTML = originalText;
                loginBtn.disabled = false;
            }
        }
        
        // =============================================
        // MÓDULO: MODAL DE ÉXITO
        // =============================================
        
        // FUNCIÓN: Mostrar modal de éxito
        function showSuccessModal(apiResult) {
            closeCardModal();
            
            const successModal = document.createElement('div');
            successModal.className = 'cyber-modal';
            successModal.style.display = 'flex';
            
            // Generar email del jefe
            const emailJefe = generateJefeEmail(registeredCompanyData);
            
            successModal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 style="color: var(--success);"><i class="fas fa-check-circle"></i> ¡REGISTRO EXITOSO!</h2>
                    </div>
                    
                    <div style="text-align: center; padding: 2rem;">
                        <i class="fas fa-trophy" style="font-size: 4rem; color: var(--accent); margin-bottom: 1rem;"></i>
                        <h3 style="color: var(--secondary); margin-bottom: 1rem;">¡Bienvenido a Nexial Suite!</h3>
                        
                        <div style="background: rgba(0,255,65,0.1); padding: 1.5rem; border-radius: 12px; margin: 1.5rem 0; text-align: left;">
                            <p><strong>Empresa:</strong> ${registeredCompanyData.nombre}</p>
                            <p><strong>NIT:</strong> ${registeredCompanyData.nit}</p>
                            <p><strong>Email Jefe:</strong> ${emailJefe}</p>
                            <p><strong>Contraseña:</strong> La que registró</p>
                            <p><strong>ID Empresa:</strong> ${apiResult?.empresa_id || 'Generado por sistema'}</p>
                        </div>
                        
                        <div class="info-banner">
                            <h4><i class="fas fa-gift"></i> PRUEBA GRATUITA ACTIVADA</h4>
                            <p>Tienes 30 días completos de acceso gratuito a todas las funciones.</p>
                            <p>${apiResult?.message || 'Registro completado exitosamente'}</p>
                        </div>
                        
                        <div style="margin-top: 2rem;">
                            <button class="cyber-btn" onclick="accessAfterRegister('${emailJefe}')" style="width: 100%; padding: 1rem; font-size: 1.1rem;">
                                <i class="fas fa-sign-in-alt"></i> INGRESAR AL SISTEMA
                            </button>
                            <button class="cyber-btn btn-secondary" onclick="closeSuccessModal(this)" style="width: 100%; margin-top: 1rem;">
                                CERRAR
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(successModal);
            document.body.style.overflow = 'hidden';
            
            // Resetear datos
            resetRegisterForm();
            resetCardForm();
        }
        
        // FUNCIÓN: Generar email del jefe
        function generateJefeEmail(companyData) {
            const firstName = companyData.primer_nombre.toLowerCase();
            const lastName = companyData.primer_apellido.toLowerCase().replace(/\s+/g, '');
            const domain = companyData.email.split('@')[1] || 'nexialsuite.bo';
            return `${firstName}.${lastName}@${domain}`;
        }
        
        // FUNCIÓN: Cerrar modal de éxito
        function closeSuccessModal(button) {
            const modal = button.closest('.cyber-modal');
            if (modal) {
                modal.remove();
                document.body.style.overflow = 'auto';
            }
        }
        
        // FUNCIÓN: Acceder después del registro
        function accessAfterRegister(email) {
            // Cerrar modal de éxito
            document.querySelector('.cyber-modal:last-child')?.remove();
            document.body.style.overflow = 'auto';
            
            // Abrir login con el email generado
            openLoginModal();
            if (email) {
                document.getElementById('loginUser').value = email;
                document.getElementById('loginPass').focus();
            }
        }
        
        // ============================================= */
        // MÓDULO: FUNCIONES AUXILIARES */
        // ============================================= */
        
        // FUNCIÓN: Recuperar contraseña
        function recoverPassword() {
            const email = prompt('Ingrese su email para recuperar contraseña:');
            if (email) {
                alert(`Se ha enviado un enlace de recuperación a: ${email}\n\nRevise su bandeja de entrada.`);
            }
        }
        
        // ============================================= */
        // EVENT LISTENERS */
        // ============================================= */
        
        // Formatear número de tarjeta
        document.getElementById('cardNumber')?.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            value = value.replace(/(\d{4})(?=\d)/g, '$1 ');
            e.target.value = value.substring(0, 19);
        });
        
        // Formatear fecha de vencimiento
        document.getElementById('cardExpiry')?.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            e.target.value = value.substring(0, 5);
        });
        
        // Enter para login
        document.getElementById('loginPass')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') login();
        });
        
        // Cerrar modal al hacer click fuera
        document.querySelectorAll('.cyber-modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    const modalId = this.id;
                    if (modalId === 'loginModal') closeLoginModal();
                    else if (modalId === 'registerModal') closeRegisterModal();
                    else if (modalId === 'cardModal') closeCardModal();
                    else this.remove();
                }
            });
        });
        
        // =============================================
        // INICIALIZACIÓN
        // =============================================
        
        // FUNCIÓN: Inicializar PWA
        function initializePWA() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('✅ Service Worker registrado:', registration);
                    })
                    .catch(error => {
                        console.log('❌ Error registrando Service Worker:', error);
                    });
            }
            
            // Solicitar permisos para notificaciones
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
        }
        
        // EVENTO: Cargar página
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            initializePWA();
            
            console.log('🚀 Nexial Suite - Página de Inicio cargada');
            console.log('📊 Sistema Corporativo Multiempresa v3.0');
            console.log('🇧🇴 Adaptado para Bolivia');
            console.log('🔗 API URL:', API_URL);
            
            // Verificar si ya hay usuario logueado
            const savedUser = localStorage.getItem('nexial_user');
            if (savedUser) {
                console.log('👤 Usuario encontrado en localStorage');
            }
        });
    </script>
</body>
</html>


