<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexial Suite - Sistema Empresarial Integral</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="pwa-manifest.json">
    <style>
        /* ============================================= */
        /* REGIÓN: VARIABLES GLOBALES */
        /* ============================================= */
        :root {
            --primary: #7c3aed;
            --primary-glow: #9d5bff;
            --secondary: #00f5ff;
            --accent: #ffd700;
            --success: #00ff41;
            --danger: #ff0055;
            --warning: #ffaa00;
            --info: #00aaff;
            
            --dark: #0f0f23;
            --darker: #070710;
            --card-bg: rgba(15, 15, 35, 0.8);
            --glass: rgba(255, 255, 255, 0.05);
            
            --neon-shadow: 0 0 15px;
        }
        
        /* ============================================= */
        /* MÓDULO: RESET Y BASE */
        /* ============================================= */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', 'Roboto', sans-serif;
            background: var(--darker);
            color: #f0f0ff;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(124, 58, 237, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 245, 255, 0.1) 0%, transparent 20%);
            overflow-x: hidden;
        }
        
        /* ============================================= */
        /* COMPONENTE: HEADER CYBERPUNK */
        /* ============================================= */
        .cyber-header {
            background: rgba(15, 15, 35, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(124, 58, 237, 0.3);
            padding: 1rem 2rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideDown 0.8s ease-out;
        }
        
        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .cyber-logo {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from {
                text-shadow: 0 0 10px rgba(124, 58, 237, 0.5),
                             0 0 20px rgba(124, 58, 237, 0.3);
            }
            to {
                text-shadow: 0 0 20px rgba(124, 58, 237, 0.8),
                             0 0 30px rgba(124, 58, 237, 0.6),
                             0 0 40px rgba(124, 58, 237, 0.4);
            }
        }
        
        .cyber-nav { 
            display: flex; 
            gap: 2rem; 
        }
        
        .cyber-nav a {
            color: #cbd5e1;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .cyber-nav a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(124, 58, 237, 0.2), transparent);
            transition: 0.5s;
        }
        
        .cyber-nav a:hover::before { left: 100%; }
        .cyber-nav a:hover {
            background: rgba(124, 58, 237, 0.2);
            color: var(--secondary);
            transform: translateY(-2px);
        }
        
        /* ============================================= */
        /* COMPONENTE: BOTONES CYBERPUNK */
        /* ============================================= */
        .cyber-btn {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .cyber-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        
        .cyber-btn:hover::before { left: 100%; }
        .cyber-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--neon-shadow) rgba(124, 58, 237, 0.5);
        }
        
        .btn-primary {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            color: white;
        }
        
        /* ============================================= */
        /* SECCIÓN: HERO PRINCIPAL */
        /* ============================================= */
        .cyber-hero {
            padding: 12rem 2rem 6rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .cyber-hero::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(124, 58, 237, 0.1) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 0.3;
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                opacity: 0.6;
                transform: translate(-50%, -50%) scale(1.2);
            }
        }
        
        .cyber-hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(124, 58, 237, 0.3);
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .cyber-subtitle {
            font-size: 1.3rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            opacity: 0.9;
            animation: fadeInUp 1s ease-out 0.5s both;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ============================================= */
        /* MÓDULO: TARJETAS DE CARACTERÍSTICAS */
        /* ============================================= */
        .cyber-features {
            padding: 6rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .cyber-card {
            background: rgba(15, 15, 35, 0.8);
            border-radius: 15px;
            padding: 2rem;
            border: 1px solid rgba(124, 58, 237, 0.3);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease-out forwards;
        }
        
        .cyber-card:nth-child(1) { animation-delay: 0.1s; }
        .cyber-card:nth-child(2) { animation-delay: 0.2s; }
        .cyber-card:nth-child(3) { animation-delay: 0.3s; }
        .cyber-card:nth-child(4) { animation-delay: 0.4s; }
        
        .cyber-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(124, 58, 237, 0.1), transparent);
            transition: 0.5s;
        }
        
        .cyber-card:hover::before { left: 100%; }
        .cyber-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 15px 30px rgba(124, 58, 237, 0.2),
                        0 0 50px rgba(124, 58, 237, 0.1);
        }
        
        .cyber-card h3 {
            color: var(--secondary);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        
        .cyber-card ul {
            margin-top: 1rem;
            padding-left: 1.5rem;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .cyber-card li {
            margin-bottom: 0.5rem;
        }
        
        /* ============================================= */
        /* SECCIÓN: FORMULARIOS */
        /* ============================================= */
        .cyber-form {
            background: rgba(15, 15, 35, 0.8);
            padding: 2.5rem;
            border-radius: 15px;
            border: 1px solid rgba(0, 245, 255, 0.3);
            max-width: 500px;
            margin: 0 auto;
            animation: scaleIn 0.6s ease-out;
        }
        
        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--secondary);
            font-weight: 500;
        }
        
        .form-group input, 
        .form-group select {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(124, 58, 237, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='white' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 12px;
            padding-right: 2.5rem;
            cursor: pointer;
        }
        
        .form-group input {
            background-image: none;
            padding-right: 1rem;
            cursor: text;
        }
        
        .form-group select option {
            background: rgba(15, 15, 35, 1) !important;
            color: white !important;
            padding: 12px !important;
            font-size: 1rem !important;
            border-bottom: 1px solid rgba(124, 58, 237, 0.3) !important;
        }
        
        .form-group select option:hover,
        .form-group select option:focus,
        .form-group select option:checked {
            background: rgba(124, 58, 237, 0.4) !important;
            color: var(--secondary) !important;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(124, 58, 237, 0.3),
                        0 0 20px rgba(124, 58, 237, 0.1);
        }
        
        @-moz-document url-prefix() {
            .form-group select {
                color: white !important;
                text-shadow: 0 0 0 white;
            }
            .form-group select option {
                background: rgba(15, 15, 35, 1) !important;
                color: white !important;
            }
        }
        
        .password-wrapper {
            position: relative;
        }
        
        .toggle-password {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--secondary);
            cursor: pointer;
            transition: all 0.3s;
            z-index: 2;
        }
        
        .toggle-password:hover {
            color: var(--primary);
            transform: translateY(-50%) scale(1.1);
        }
        
        /* ============================================= */
        /* COMPONENTE: BANNERS DE INFORMACIÓN */
        /* ============================================= */
        .info-banner {
            background: rgba(0, 245, 255, 0.1);
            border: 1px solid var(--secondary);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
            animation: neonGlow 2s ease-in-out infinite alternate;
        }
        
        @keyframes neonGlow {
            from {
                box-shadow: 0 0 10px rgba(0, 245, 255, 0.3),
                            inset 0 0 10px rgba(0, 245, 255, 0.1);
            }
            to {
                box-shadow: 0 0 20px rgba(0, 245, 255, 0.6),
                            inset 0 0 20px rgba(0, 245, 255, 0.2);
            }
        }
        
        .warning-box {
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid var(--accent);
            padding: 1rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            text-align: center;
            animation: pulseWarning 2s ease-in-out infinite;
        }
        
        @keyframes pulseWarning {
            0%, 100% {
                border-color: var(--accent);
                box-shadow: 0 0 10px rgba(255, 215, 0, 0.2);
            }
            50% {
                border-color: #ffed4e;
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
            }
        }
        
        .protection-banner {
            background: rgba(0, 255, 65, 0.1);
            border: 2px solid var(--success);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            text-align: center;
            animation: successPulse 2s ease-in-out infinite;
        }
        
        @keyframes successPulse {
            0%, 100% {
                border-color: var(--success);
                box-shadow: 0 0 15px rgba(0, 255, 65, 0.2);
            }
            50% {
                border-color: #00ffaa;
                box-shadow: 0 0 25px rgba(0, 255, 65, 0.4);
            }
        }
        
        /* ============================================= */
        /* SECCIÓN: FOOTER */
        /* ============================================= */
        .cyber-footer {
            background: rgba(7, 7, 16, 0.95);
            padding: 4rem 2rem 2rem;
            border-top: 1px solid rgba(124, 58, 237, 0.3);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .cyber-footer::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
            animation: scanline 3s linear infinite;
        }
        
        @keyframes scanline {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* ============================================= */
        /* MÓDULO: MODALES CYBERPUNK */
        /* ============================================= */
        .cyber-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(7, 7, 16, 0.98);
            backdrop-filter: blur(10px);
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 2rem;
            overflow-y: auto;
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                backdrop-filter: blur(0);
            }
            to {
                opacity: 1;
                backdrop-filter: blur(10px);
            }
        }
        
        .modal-content {
            background: rgba(15, 15, 35, 0.95);
            padding: 2.5rem;
            border-radius: 20px;
            border: 1px solid rgba(124, 58, 237, 0.4);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5),
                        0 0 100px rgba(124, 58, 237, 0.1);
            animation: modalSlideIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0.7;
            z-index: 10;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .close-modal:hover {
            opacity: 1;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(90deg);
        }
        
        .modal-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(124, 58, 237, 0.3);
            position: relative;
        }
        
        .modal-header::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 25%;
            width: 50%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }
        
        .modal-header h2 {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1.5rem;
        }
        
        /* ============================================= */
        /* COMPONENTE: PARTÍCULAS DE FONDO */
        /* ============================================= */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            background: rgba(124, 58, 237, 0.2);
            border-radius: 50%;
            animation: floatParticle 20s infinite linear;
        }
        
        @keyframes floatParticle {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Estilos para el contenedor de teléfono con código de país */
        .phone-container {
            display: flex;
            gap: 0.5rem;
        }
        
        .country-code {
            flex: 0 0 100px;
        }
        
        .phone-number {
            flex: 1;
        }
        
        /* Estilos para grid de 2 columnas */
        .name-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        /* Estilos para checkbox mejorado */
        .checkbox-container {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin: 1.5rem 0;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(124, 58, 237, 0.2);
            transition: all 0.3s;
        }
        
        .checkbox-container:hover {
            background: rgba(124, 58, 237, 0.05);
            border-color: rgba(124, 58, 237, 0.4);
        }
        
        .checkbox-container input[type="checkbox"] {
            margin-top: 0.25rem;
            min-width: 18px;
            min-height: 18px;
            accent-color: var(--primary);
        }
        
        .checkbox-container label {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.9rem;
            line-height: 1.4;
            margin: 0;
            cursor: pointer;
        }
        
        .checkbox-container label a {
            color: var(--secondary);
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .checkbox-container label a:hover {
            color: var(--primary);
            text-decoration: underline;
        }
        
        /* ============================================= */
        /* MEDIA QUERIES - RESPONSIVE */
        /* ============================================= */
        @media (max-width: 768px) {
            .cyber-hero h1 { font-size: 2.5rem; }
            .cyber-nav { display: none; }
            .features-grid { grid-template-columns: 1fr; }
            .modal-content { padding: 1.5rem; }
            .form-actions { flex-direction: column; }
            .phone-container { flex-direction: column; }
            .country-code { flex: 1; }
            .checkbox-container { flex-direction: column; }
            .name-grid { grid-template-columns: 1fr; }
        }
        
        @media (max-width: 480px) {
            .cyber-header { padding: 1rem; }
            .cyber-hero { padding: 8rem 1rem 4rem; }
            .cyber-features { padding: 3rem 1rem; }
        }
        
        /* Estilos para loading */
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(7, 7, 16, 0.95);
            backdrop-filter: blur(10px);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(124, 58, 237, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Mensajes de alerta */
        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            display: none;
        }
        
        .alert-success {
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid var(--success);
            color: var(--success);
        }
        
        .alert-error {
            background: rgba(255, 0, 85, 0.1);
            border: 1px solid var(--danger);
            color: var(--danger);
        }
        
        /* Indicador de paso */
        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            gap: 0.5rem;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100px;
        }
        
        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 0.5rem;
            transition: all 0.3s;
        }
        
        .step.active .step-circle {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 0 15px rgba(124, 58, 237, 0.5);
        }
        
        .step.completed .step-circle {
            background: var(--success);
            color: white;
        }
        
        .step-label {
            font-size: 0.9rem;
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .step.active .step-label {
            color: var(--secondary);
            font-weight: bold;
        }
        
        /* Línea entre pasos */
        .step-line {
            flex: 1;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            margin-top: 20px;
        }
    </style>
    
    <!-- SUPABASE JS -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- BLOQUE: PARTÍCULAS DE FONDO -->
    <div class="particles" id="particles"></div>
    
    <!-- BLOQUE: LOADING GLOBAL -->
    <div class="loading" id="globalLoading">
        <div class="spinner"></div>
        <p style="margin-top: 1rem; color: var(--secondary);">Procesando...</p>
    </div>
    
    <!-- BLOQUE: HEADER PRINCIPAL -->
    <header class="cyber-header">
        <div class="cyber-logo">
            <i class="fas fa-brain"></i>
            NEXIAL SUITE
        </div>
        <nav class="cyber-nav">
            <a href="#inicio">Inicio</a>
            <a href="#caracteristicas">Sistema</a>
            <a href="#ventajas">Ventajas</a>
            <a href="#" onclick="openRegisterModal()">Registro</a>
        </nav>
        <button class="cyber-btn" onclick="openLoginModal()">
            <i class="fas fa-sign-in-alt"></i> Acceso
        </button>
    </header>

    <!-- BLOQUE: SECCIÓN HERO -->
    <section class="cyber-hero" id="inicio">
        <h1>Transforma tu Gestión Empresarial</h1>
        <p class="cyber-subtitle">
            Sistema integral multiempresa. Control total, máxima eficiencia.
            Apps para ventas, distribución y almacenes en tiempo real.
        </p>
        <button class="cyber-btn" style="padding: 1.2rem 2.5rem; font-size: 1.1rem;" onclick="openRegisterModal()">
            <i class="fas fa-rocket"></i> COMENZAR PRUEBA GRATUITA
        </button>
    </section>

    <!-- BLOQUE: CARACTERÍSTICAS DEL SISTEMA -->
    <section class="cyber-features" id="caracteristicas">
        <div style="text-align: center; margin-bottom: 3rem;">
            <h2 style="color: var(--secondary); font-size: 2.5rem; animation: fadeInUp 1s ease-out;">SISTEMA POR ÁREAS ESPECIALIZADAS</h2>
            <p style="opacity: 0.8;">Cada área con funciones específicas y control total</p>
        </div>
        
        <div class="features-grid">
            <div class="cyber-card">
                <h3><i class="fas fa-crown"></i> DIRECCIÓN EJECUTIVA</h3>
                <p>Control total de su empresa. Panel ejecutivo completo con visibilidad de todas las áreas.</p>
                <ul>
                    <li>Supervisión todas las áreas</li>
                    <li>Reportes consolidados en tiempo real</li>
                    <li>Gestión estratégica y toma de decisiones</li>
                    <li>Control financiero completo</li>
                    <li>Monitoreo de producción y ventas</li>
                </ul>
            </div>
            
            <div class="cyber-card">
                <h3><i class="fas fa-chart-line"></i> DIRECCIÓN COMERCIAL</h3>
                <p>Ventas, inventario, rutas y gestión comercial especializada con apps móviles.</p>
                <ul>
                    <li>Asignación de zonas geográficas a vendedores</li>
                    <li>Control de inventario en tiempo real</li>
                    <li>Optimización de rutas de distribución</li>
                    <li>Seguimiento de pedidos GPS</li>
                    <li>Mapas y geolocalización avanzada</li>
                    <li>Asignación de productos a vendedores</li>
                    <li>Aprobación de clientes y pedidos</li>
                </ul>
            </div>
            
            <div class="cyber-card">
                <h3><i class="fas fa-calculator"></i> ADMINISTRACIÓN & FINANZAS</h3>
                <p>Contabilidad, nómina, facturación y gestión financiera completa.</p>
                <ul>
                    <li>Gestión de usuarios y empleados</li>
                    <li>Recursos humanos completo</li>
                    <li>Contabilidad automatizada</li>
                    <li>Facturación electrónica</li>
                    <li>Cálculo de comisiones y sueldos</li>
                    <li>Gestión de proveedores</li>
                    <li>Reportes financieros detallados</li>
                </ul>
            </div>
            
            <div class="cyber-card">
                <h3><i class="fas fa-mobile-alt"></i> APPS ESPECIALIZADAS</h3>
                <p>Aplicaciones móviles para cada función operativa.</p>
                <ul>
                    <li>App Vendedor: Pedidos en campo</li>
                    <li>App Almacén: Control de inventario</li>
                    <li>App Distribuidor: Rutas y entregas</li>
                    <li>Trabajo offline con sincronización</li>
                    <li>Notificaciones push en tiempo real</li>
                    <li>Fotos y firmas digitales</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- BLOQUE: SECCIÓN DE VENTAJAS -->
    <section class="cyber-features" id="ventajas" style="background: var(--dark);">
        <div style="text-align: center; margin-bottom: 3rem;">
            <h2 style="color: var(--accent); font-size: 2.5rem;">VENTAJAS DEL SISTEMA</h2>
            <p style="opacity: 0.8;">Todo lo que necesitas en una sola plataforma</p>
        </div>
        
        <div class="features-grid">
            <div class="cyber-card">
                <h3><i class="fas fa-sync-alt"></i> TIEMPO REAL</h3>
                <p>Todas las áreas actualizadas al instante. Lo que ve el vendedor en campo lo ve el jefe en su oficina.</p>
                <ul>
                    <li>Ventas registradas al instante</li>
                    <li>Stock actualizado en tiempo real</li>
                    <li>Ubicación de distribuidores en vivo</li>
                    <li>Notificaciones inmediatas</li>
                </ul>
            </div>
            
            <div class="cyber-card">
                <h3><i class="fas fa-shield-alt"></i> SEGURIDAD TOTAL</h3>
                <p>Datos protegidos con encriptación de extremo a extremo. Cada empresa solo ve su información.</p>
                <ul>
                    <li>Separación de datos por empresa</li>
                    <li>Roles y permisos granulares</li>
                    <li>Backup automático diario</li>
                    <li>Cumplimiento normativo boliviano</li>
                </ul>
            </div>
            
            <div class="cyber-card">
                <h3><i class="fas fa-chart-bar"></i> REPORTES AVANZADOS</h3>
                <p>Análisis detallado de cada aspecto del negocio. Toma decisiones basadas en datos reales.</p>
                <ul>
                    <li>Panel ejecutivo personalizable</li>
                    <li>Reportes financieros automáticos</li>
                    <li>Análisis de ventas por zona</li>
                    <li>Proyecciones y tendencias</li>
                </ul>
            </div>
            
            <div class="cyber-card">
                <h3><i class="fas fa-cogs"></i> INTEGRACIÓN COMPLETA</h3>
                <p>Todas las áreas conectadas entre sí. Finanzas ve lo de ventas, ventas ve lo de almacén.</p>
                <ul>
                    <li>Flujo de trabajo automatizado</li>
                    <li>Aprobaciones electrónicas</li>
                    <li>Comunicación entre áreas</li>
                    <li>Historial completo de operaciones</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- BLOQUE: FOOTER -->
    <footer class="cyber-footer">
        <div class="cyber-logo" style="justify-content: center; margin-bottom: 1rem;">
            <i class="fas fa-brain"></i>
            NEXIAL SUITE
        </div>
        <p style="opacity: 0.8; margin-bottom: 2rem;">Sistema de Gestión Empresarial Integral</p>
        
        <div style="display: flex; justify-content: center; gap: 2rem; margin: 2rem 0; flex-wrap: wrap;">
            <a href="#inicio" style="color: var(--secondary); text-decoration: none;">Inicio</a>
            <a href="#caracteristicas" style="color: var(--secondary); text-decoration: none;">Sistema</a>
            <a href="#ventajas" style="color: var(--secondary); text-decoration: none;">Ventajas</a>
            <a href="#" onclick="openRegisterModal()" style="color: var(--secondary); text-decoration: none;">Registro</a>
            <a href="#" onclick="openLoginModal()" style="color: var(--secondary); text-decoration: none;">Acceso</a>
        </div>
        
        <p>© 2025 Nexial Suite. Todos los derechos reservados.</p>
        <p style="margin-top: 1rem; opacity: 0.7;">
            <i class="fas fa-envelope"></i> marcelodanielcc@gmail.com
        </p>
        <p style="margin-top: 0.5rem; opacity: 0.6; font-size: 0.9rem;">
            Conectado a Supabase en tiempo real
        </p>
    </footer>

    <!-- ============================================= -->
    <!-- MODALES DEL SISTEMA -->
    <!-- ============================================= -->

    <!-- MODAL: LOGIN -->
    <div class="cyber-modal" id="loginModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeLoginModal()">×</button>
            
            <div class="modal-header">
                <h2><i class="fas fa-sign-in-alt"></i> ACCESO AL SISTEMA</h2>
                <p style="color: rgba(255,255,255,0.7);">Ingresa con tus credenciales</p>
            </div>
            
            <div class="alert" id="loginAlert"></div>
            
            <div class="form-group">
                <label><i class="fas fa-envelope"></i> Email</label>
                <input type="email" id="loginEmail" placeholder="test@test.com" autofocus>
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-key"></i> Contraseña</label>
                <div class="password-wrapper">
                    <input type="password" id="loginPassword" placeholder="12345678">
                    <button type="button" class="toggle-password" onclick="togglePassword('loginPassword')">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
            </div>
            
            <div style="text-align: right; margin: 1rem 0;">
                <a href="#" onclick="recoverPassword()" style="color: var(--primary); text-decoration: none;">
                    <i class="fas fa-unlock-alt"></i> ¿Olvidaste tu contraseña?
                </a>
            </div>
            
            <button class="cyber-btn" style="width: 100%; padding: 1rem; font-size: 1.1rem;" onclick="loginWithSupabase()">
                <i class="fas fa-sign-in-alt"></i> INGRESAR AL SISTEMA
            </button>
            
            <div style="text-align: center; margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
                <p style="color: rgba(255,255,255,0.7);">¿No tienes cuenta?</p>
                <button class="cyber-btn btn-secondary" onclick="closeLoginModal(); openRegisterModal();" style="width: 100%; margin-top: 0.5rem;">
                    <i class="fas fa-building"></i> REGISTRAR EMPRESA
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL: REGISTRO DE DIRECTOR EJECUTIVO (PASO 1) -->
    <div class="cyber-modal" id="registerDirectorModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeRegisterDirectorModal()">×</button>
            
            <div class="modal-header">
                <h2><i class="fas fa-user-tie"></i> REGISTRO DE DIRECTOR EJECUTIVO</h2>
                <p style="color: rgba(255,255,255,0.7);">Paso 1: Complete sus datos personales</p>
            </div>
            
            <!-- Indicador de pasos -->
            <div class="step-indicator">
                <div class="step active">
                    <div class="step-circle">1</div>
                    <div class="step-label">Director Ejecutivo</div>
                </div>
                <div class="step-line"></div>
                <div class="step">
                    <div class="step-circle">2</div>
                    <div class="step-label">Empresa</div>
                </div>
            </div>
            
            <div class="info-banner">
                <h3><i class="fas fa-info-circle"></i> IMPORTANTE</h3>
                <p>Usted será registrado como el <strong>Director Ejecutivo</strong> de la empresa. Será el primer usuario y tendrá acceso total al sistema.</p>
            </div>
            
            <div class="alert" id="registerDirectorAlert"></div>
            
            <div class="form-group">
                <label><i class="fas fa-user"></i> Nombres Completos *</label>
                <input type="text" id="directorNames" placeholder="Ej: Juan Carlos">
            </div>
            
            <div class="name-grid">
                <div class="form-group">
                    <label><i class="fas fa-user"></i> Primer Apellido *</label>
                    <input type="text" id="directorFirstLastName" placeholder="Apellido paterno">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-user"></i> Segundo Apellido</label>
                    <input type="text" id="directorSecondLastName" placeholder="Apellido materno">
                </div>
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-id-card"></i> DNI / Documento de Identidad *</label>
                <input type="text" id="directorDNI" placeholder="Ej: 12345678" maxlength="20">
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-envelope"></i> Email Personal *</label>
                <input type="email" id="directorEmail" placeholder="juan.carlos@gmail.com">
                <small style="color: rgba(255,255,255,0.6); font-size: 0.85rem; display: block; margin-top: 0.25rem;">
                    Este será su email de acceso al sistema
                </small>
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-phone"></i> Teléfono/Celular *</label>
                <div class="phone-container">
                    <div class="form-group country-code">
                        <select id="directorCountryCode">
                            <option value="+591">+591 (BO)</option>
                            <option value="+51">+51 (PE)</option>
                            <option value="+56">+56 (CL)</option>
                            <option value="+54">+54 (AR)</option>
                            <option value="+55">+55 (BR)</option>
                            <option value="+57">+57 (CO)</option>
                            <option value="+58">+58 (VE)</option>
                            <option value="+52">+52 (MX)</option>
                            <option value="+1">+1 (US/CA)</option>
                            <option value="+34">+34 (ES)</option>
                        </select>
                    </div>
                    <div class="form-group phone-number">
                        <input type="tel" id="directorPhone" placeholder="60000000">
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-key"></i> Contraseña *</label>
                <div class="password-wrapper">
                    <input type="password" id="directorPassword" minlength="8" placeholder="Mínimo 8 caracteres">
                    <button type="button" class="toggle-password" onclick="togglePassword('directorPassword')">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-key"></i> Confirmar Contraseña *</label>
                <div class="password-wrapper">
                    <input type="password" id="directorConfirmPassword" minlength="8" placeholder="Repita su contraseña">
                    <button type="button" class="toggle-password" onclick="togglePassword('directorConfirmPassword')">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
            </div>
            
            <div class="form-actions">
                <button type="button" class="cyber-btn btn-secondary" onclick="closeRegisterDirectorModal()">
                    Cancelar
                </button>
                <button type="button" class="cyber-btn" onclick="registerDirector()">
                    <i class="fas fa-arrow-right"></i> SIGUIENTE: REGISTRAR EMPRESA
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL: REGISTRO DE EMPRESA (PASO 2) -->
    <div class="cyber-modal" id="registerCompanyModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeRegisterCompanyModal()">×</button>
            
            <div class="modal-header">
                <h2><i class="fas fa-building"></i> REGISTRO DE EMPRESA</h2>
                <p style="color: rgba(255,255,255,0.7);">Paso 2: Complete los datos de su empresa</p>
            </div>
            
            <!-- Indicador de pasos -->
            <div class="step-indicator">
                <div class="step completed">
                    <div class="step-circle"><i class="fas fa-check"></i></div>
                    <div class="step-label">Director Ejecutivo</div>
                </div>
                <div class="step-line"></div>
                <div class="step active">
                    <div class="step-circle">2</div>
                    <div class="step-label">Empresa</div>
                </div>
            </div>
            
            <div class="info-banner">
                <h3><i class="fas fa-gift"></i> 30 DÍAS DE PRUEBA GRATUITA</h3>
                <p>Regístrese hoy y obtenga acceso completo por 30 días sin costo</p>
            </div>
            
            <div class="alert" id="registerCompanyAlert"></div>
            
            <div class="form-group">
                <label><i class="fas fa-building"></i> Razón Social *</label>
                <input type="text" id="companyName" placeholder="Ej: Mi Empresa S.A.">
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-id-card"></i> NIT / RUC / Documento Tributario *</label>
                <input type="text" id="companyRUC" placeholder="Ej: 1234567890" maxlength="20">
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-industry"></i> Tipo de Industria *</label>
                <select id="companyIndustry">
                    <option value="">Seleccionar industria</option>
                    <option value="Tecnología">Tecnología</option>
                    <option value="Comercio">Comercio</option>
                    <option value="Manufactura">Manufactura</option>
                    <option value="Servicios">Servicios</option>
                    <option value="Alimentos">Alimentos</option>
                    <option value="Construcción">Construcción</option>
                    <option value="Mineria">Minería</option>
                    <option value="Agricultura">Agricultura</option>
                    <option value="Turismo">Turismo</option>
                    <option value="Otros">Otros</option>
                </select>
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-user"></i> Persona de Contacto *</label>
                <input type="text" id="companyContact" placeholder="Nombre del contacto principal">
                <small style="color: rgba(255,255,255,0.6); font-size: 0.85rem; display: block; margin-top: 0.25rem;">
                    Generalmente el director ejecutivo
                </small>
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-envelope"></i> Email Corporativo</label>
                <input type="email" id="companyEmail" placeholder="contacto@empresa.com">
                <small style="color: rgba(255,255,255,0.6); font-size: 0.85rem; display: block; margin-top: 0.25rem;">
                    Email oficial de la empresa (opcional)
                </small>
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-phone"></i> Teléfono de la Empresa *</label>
                <div class="phone-container">
                    <div class="form-group country-code">
                        <select id="companyCountryCode">
                            <option value="+591">+591 (BO)</option>
                            <option value="+51">+51 (PE)</option>
                            <option value="+56">+56 (CL)</option>
                            <option value="+54">+54 (AR)</option>
                            <option value="+55">+55 (BR)</option>
                            <option value="+57">+57 (CO)</option>
                            <option value="+58">+58 (VE)</option>
                            <option value="+52">+52 (MX)</option>
                            <option value="+1">+1 (US/CA)</option>
                            <option value="+34">+34 (ES)</option>
                        </select>
                    </div>
                    <div class="form-group phone-number">
                        <input type="tel" id="companyPhone" placeholder="60000000">
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-map-marker-alt"></i> Dirección *</label>
                <input type="text" id="companyAddress" placeholder="Dirección completa">
            </div>
            
            <div class="form-group">
                <label><i class="fas fa-city"></i> Ciudad *</label>
                <input type="text" id="companyCity" placeholder="Ciudad donde opera">
            </div>
            
            <div class="checkbox-container">
                <input type="checkbox" id="termsCheckbox">
                <label for="termsCheckbox">
                    Acepto los <a href="#" onclick="showTerms()">términos y condiciones</a> del servicio y autorizo el tratamiento de mis datos según la normativa aplicable.
                </label>
            </div>
            
            <div class="form-actions">
                <button type="button" class="cyber-btn btn-secondary" onclick="goBackToDirector()">
                    <i class="fas fa-arrow-left"></i> ATRÁS
                </button>
                <button type="button" class="cyber-btn" onclick="registerCompanyComplete()">
                    <i class="fas fa-check-circle"></i> REGISTRAR EMPRESA
                </button>
            </div>
        </div>
    </div>

    <script>
        // =============================================
        // CONFIGURACIÓN SUPABASE
        // =============================================
        const SUPABASE_URL = 'https://irunkzdiloimwbchgczm.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_Qi7oFmXllT6wnk2lVZxILA_n90qjrBW';
        
        // Crear cliente Supabase
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        
        // Datos temporales
        let directorData = null;
        
        // =============================================
        // FUNCIONES VISUALES
        // =============================================
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.style.width = Math.random() * 4 + 1 + 'px';
                particle.style.height = particle.style.width;
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = Math.random() * 20 + 10 + 's';
                particle.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(particle);
            }
        }
        
        function showLoading() {
            document.getElementById('globalLoading').style.display = 'flex';
        }
        
        function hideLoading() {
            document.getElementById('globalLoading').style.display = 'none';
        }
        
        function showAlert(elementId, type, message) {
            const alertElement = document.getElementById(elementId);
            alertElement.className = `alert alert-${type}`;
            alertElement.innerHTML = message;
            alertElement.style.display = 'block';
            
            if (type === 'success') {
                setTimeout(() => alertElement.style.display = 'none', 5000);
            }
        }
        
        // =============================================
        // FUNCIONES DE MODALES
        // =============================================
        function openLoginModal() {
            document.getElementById('loginModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
        
        function closeLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        function openRegisterModal() {
            directorData = null;
            document.getElementById('registerDirectorModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
        
        function closeRegisterDirectorModal() {
            document.getElementById('registerDirectorModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        function openRegisterCompanyModal() {
            document.getElementById('registerDirectorModal').style.display = 'none';
            document.getElementById('registerCompanyModal').style.display = 'flex';
        }
        
        function closeRegisterCompanyModal() {
            document.getElementById('registerCompanyModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        function goBackToDirector() {
            document.getElementById('registerCompanyModal').style.display = 'none';
            document.getElementById('registerDirectorModal').style.display = 'flex';
        }
        
        function togglePassword(fieldId) {
            const field = document.getElementById(fieldId);
            field.type = field.type === 'password' ? 'text' : 'password';
        }
        
        function showTerms() {
            alert('Términos y condiciones...');
        }
        
        // =============================================
        // REGISTRO DIRECTOR (PASO 1)
        // =============================================
        async function registerDirector() {
            showLoading();
            
            const password = document.getElementById('directorPassword').value;
            const confirmPassword = document.getElementById('directorConfirmPassword').value;
            
            // Validaciones
            if (password !== confirmPassword) {
                showAlert('registerDirectorAlert', 'error', 'Las contraseñas no coinciden');
                hideLoading();
                return;
            }
            
            directorData = {
                names: document.getElementById('directorNames').value.trim(),
                firstLastName: document.getElementById('directorFirstLastName').value.trim(),
                secondLastName: document.getElementById('directorSecondLastName').value.trim() || '',
                dni: document.getElementById('directorDNI').value.trim(),
                email: document.getElementById('directorEmail').value.trim().toLowerCase(),
                phone: document.getElementById('directorCountryCode').value + ' ' + document.getElementById('directorPhone').value,
                password: password
            };
            
            // Validar campos
            const required = ['names', 'firstLastName', 'dni', 'email'];
            for (const field of required) {
                if (!directorData[field]) {
                    showAlert('registerDirectorAlert', 'error', `Complete el campo ${field}`);
                    hideLoading();
                    return;
                }
            }
            
            hideLoading();
            openRegisterCompanyModal();
        }
        
        // =============================================
        // REGISTRO COMPLETO (PASO 2)
        // =============================================
        async function registerCompanyComplete() {
            showLoading();
            
            if (!directorData) {
                showAlert('registerCompanyAlert', 'error', 'Primero complete los datos del director');
                hideLoading();
                return;
            }
            
            // Datos de empresa
            const companyData = {
                nombre: document.getElementById('companyName').value.trim(),
                ruc: document.getElementById('companyRUC').value.trim(),
                industria: document.getElementById('companyIndustry').value,
                persona_contacto: document.getElementById('companyContact').value.trim(),
                email_corporativo: document.getElementById('companyEmail').value.trim().toLowerCase() || null,
                telefono: document.getElementById('companyCountryCode').value + ' ' + document.getElementById('companyPhone').value,
                direccion: document.getElementById('companyAddress').value.trim(),
                ciudad: document.getElementById('companyCity').value.trim()
            };
            
            // Validar empresa
            const required = ['nombre', 'ruc', 'industria', 'persona_contacto'];
            for (const field of required) {
                if (!companyData[field]) {
                    showAlert('registerCompanyAlert', 'error', `Complete el campo ${field}`);
                    hideLoading();
                    return;
                }
            }
            
            try {
                // 1. REGISTRAR USUARIO EN AUTH
                const { data: authData, error: authError } = await supabase.auth.signUp({
                    email: directorData.email,
                    password: directorData.password,
                    options: {
                        data: {
                            nombres: directorData.names,
                            apellidos: directorData.firstLastName + ' ' + directorData.secondLastName,
                            dni: directorData.dni,
                            telefono: directorData.phone
                        }
                    }
                });
                
                if (authError) throw new Error(`Auth: ${authError.message}`);
                
                // 2. CREAR EMPRESA
                const { data: empresaData, error: empresaError } = await supabase
                    .from('empresas')
                    .insert([companyData])
                    .select()
                    .single();
                
                if (empresaError) throw new Error(`Empresa: ${empresaError.message}`);
                
                // 3. CREAR USUARIO EN TABLA
                const { error: usuarioError } = await supabase
                    .from('usuarios')
                    .insert([{
                        id: authData.user.id,
                        empresa_id: empresaData.id,
                        email: directorData.email,
                        nombre: directorData.names,
                        apellido_paterno: directorData.firstLastName,
                        apellido_materno: directorData.secondLastName || null,
                        dni: directorData.dni,
                        telefono: directorData.phone,
                        rol: 'director'
                    }]);
                
                if (usuarioError) throw new Error(`Usuario: ${usuarioError.message}`);
                
                // 4. ÉXITO
                hideLoading();
                showAlert('registerCompanyAlert', 'success', 
                    `✅ REGISTRO EXITOSO<br>
                    Empresa: ${companyData.nombre}<br>
                    Director: ${directorData.names}<br>
                    Email: ${directorData.email}<br><br>
                    Puede iniciar sesión ahora.`);
                
                // Limpiar después de 5 segundos
                setTimeout(() => {
                    closeRegisterCompanyModal();
                    document.getElementById('loginEmail').value = directorData.email;
                    openLoginModal();
                }, 5000);
                
            } catch (error) {
                hideLoading();
                showAlert('registerCompanyAlert', 'error', `❌ Error: ${error.message}`);
            }
        }
        
        // =============================================
        // LOGIN CON SUPABASE
        // =============================================
        async function loginWithSupabase() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                showAlert('loginAlert', 'error', 'Complete email y contraseña');
                return;
            }
            
            showLoading();
            
            try {
                // 1. LOGIN EN SUPABASE AUTH
                const { data, error } = await supabase.auth.signInWithPassword({
                    email: email,
                    password: password
                });
                
                if (error) {
                    // Si falla, probar con usuario de prueba
                    if (email === 'test@test.com' && password === '12345678') {
                        localStorage.setItem('nexial_user', JSON.stringify({
                            id: 'test-user-001',
                            email: 'test@test.com',
                            nombre: 'Usuario de Prueba',
                            rol: 'director'
                        }));
                        
                        hideLoading();
                        showAlert('loginAlert', 'success', '✅ Login prueba exitoso');
                        
                        setTimeout(() => {
                            closeLoginModal();
                            window.location.href = 'dashboard.html';
                        }, 2000);
                        return;
                    }
                    throw error;
                }
                
                // 2. OBTENER DATOS DEL USUARIO
                const { data: usuarioData } = await supabase
                    .from('usuarios')
                    .select('*')
                    .eq('id', data.user.id)
                    .single();
                
                // 3. GUARDAR SESIÓN
                const userSession = {
                    id: data.user.id,
                    email: data.user.email,
                    nombre: usuarioData?.nombre || data.user.user_metadata?.nombres || 'Usuario',
                    rol: usuarioData?.rol || 'director',
                    empresa_id: usuarioData?.empresa_id
                };
                
                localStorage.setItem('nexial_user', JSON.stringify(userSession));
                localStorage.setItem('supabase_session', JSON.stringify(data.session));
                
                // 4. REDIRIGIR
                hideLoading();
                showAlert('loginAlert', 'success', '✅ Login exitoso');
                
                setTimeout(() => {
                    closeLoginModal();
                    window.location.href = 'dashboard.html';
                }, 2000);
                
            } catch (error) {
                hideLoading();
                showAlert('loginAlert', 'error', `❌ Error: ${error.message}`);
            }
        }
        
        // =============================================
        // FUNCIONES AUXILIARES
        // =============================================
        function recoverPassword() {
            const email = prompt('Email para recuperar:');
            if (email) {
                supabase.auth.resetPasswordForEmail(email)
                    .then(() => alert(`Enlace enviado a ${email}`))
                    .catch(err => alert(`Error: ${err.message}`));
            }
        }
        
        // =============================================
        // INICIALIZACIÓN
        // =============================================
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            console.log('🚀 Nexial Suite - Supabase Edition');
            console.log('🔗 URL:', SUPABASE_URL);
            
            // Validar números en formularios
            document.getElementById('directorDNI')?.addEventListener('input', function(e) {
                this.value = this.value.replace(/[^0-9]/g, '');
            });
            
            document.getElementById('companyRUC')?.addEventListener('input', function(e) {
                this.value = this.value.replace(/[^0-9]/g, '');
            });
            
            document.getElementById('directorPhone')?.addEventListener('input', function(e) {
                this.value = this.value.replace(/\D/g, '');
            });
            
            document.getElementById('companyPhone')?.addEventListener('input', function(e) {
                this.value = this.value.replace(/\D/g, '');
            });
            
            // Enter para login
            document.getElementById('loginPassword')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') loginWithSupabase();
            });
        });
    </script>
</body>
</html>
